<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FreshVeg – Farm Fresh Vegetables</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0c1116;
      --card: #111827;
      --muted: #93a4b7;
      --text: #e5eef7;
      --accent: #22c55e;
      --accent-2: #16a34a;
      --danger: #ef4444;
      --ring: rgba(34,197,94,.35);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 10% 10%, #0f172a 0%, var(--bg) 40%), radial-gradient(1200px 800px at 90% 0%, #0b1220 0%, var(--bg) 45%), var(--bg);
      color: var(--text);
    }
    a { color: inherit; text-decoration: none; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
    header {
      display:flex; align-items:center; gap:16px; justify-content:space-between; padding: 14px 0 8px; position: sticky; top: 0; background: linear-gradient(180deg, rgba(12,17,22,.95), rgba(12,17,22,.6) 60%, rgba(12,17,22,0)); backdrop-filter: blur(10px); z-index: 30;
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .logo { width: 44px; height:44px; border-radius: 12px; background: conic-gradient(from 180deg at 50% 50%, #16a34a 0deg, #22c55e 120deg, #4ade80 240deg, #16a34a 360deg); box-shadow: 0 8px 30px rgba(34,197,94,.35) inset, 0 8px 24px rgba(34,197,94,.25); }
    .brand h1 { font-size: 20px; margin:0; letter-spacing:.2px; }
    .tag { font-size: 12px; color: var(--muted); margin-top:2px }

    .controls { display:grid; grid-template-columns: 1fr 160px 160px auto; gap: 12px; width: 100%; align-items:center; }
    .input, .select, .btn { height: 44px; border-radius: 12px; border:1px solid #1f2937; background: #0b1220; color: var(--text); padding: 0 14px; outline: none; }
    .input:focus, .select:focus { border-color: var(--accent); box-shadow: 0 0 0 6px var(--ring); }
    .btn { background: linear-gradient(180deg, var(--accent) 0%, var(--accent-2) 100%); border: none; font-weight: 700; letter-spacing:.2px; cursor:pointer; box-shadow: 0 10px 18px rgba(34,197,94,.22); }
    .btn:hover { filter: brightness(1.02); transform: translateY(-1px); }

    .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; margin-top: 20px; }
    .card { background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); border:1px solid #1f2937; border-radius: 16px; overflow:hidden; display:flex; flex-direction:column; position:relative; }
    .imgwrap { aspect-ratio: 4 / 3; background:#0b1220; overflow:hidden; }
    .imgwrap img { width:100%; height:100%; object-fit: cover; display:block; transition: transform .4s ease; }
    .card:hover .imgwrap img { transform: scale(1.05); }

    .content { padding: 12px; display:flex; flex-direction:column; gap:6px; }
    .title { font-weight: 700; letter-spacing:.2px; }
    .subtle { color: var(--muted); font-size: 12px; }
    .price { font-size: 18px; font-weight:800; }
    .actions { display:flex; gap: 8px; align-items:center; margin-top: 6px; }
    .qty { display:flex; align-items:center; gap:8px; background:#0b1220; border:1px solid #1f2937; border-radius: 12px; padding: 6px 8px; }
    .qty button { width:28px; height:28px; border-radius: 8px; border:1px solid #243042; background:#0f172a; color: var(--text); cursor:pointer; }

    .add { flex:1; height:38px; border-radius: 12px; border:none; background:linear-gradient(180deg, #22c55e, #16a34a); color:#07120a; font-weight:800; cursor:pointer; }

    .cart { position: fixed; right: 16px; bottom: 16px; background: #0b1220; border:1px solid #1f2937; border-radius: 18px; width: 340px; max-height: 70vh; overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,.35); display:flex; flex-direction:column; }
    .cart header { position: sticky; inset: 0 0 auto 0; display:flex; justify-content:space-between; align-items:center; padding: 14px 16px; background: #0b1220; border-bottom:1px solid #1f2937; }
    .cart h3 { margin:0; font-size: 16px; }
    .cartlist { overflow:auto; padding: 8px; display:flex; flex-direction:column; gap:10px; }
    .cartrow { display:grid; grid-template-columns: 52px 1fr auto; gap:10px; align-items:center; background:#0c1424; border:1px solid #1f2937; border-radius: 12px; padding:8px; }
    .cartrow img { width:52px; height:52px; border-radius: 8px; object-fit:cover; }
    .cartrow .meta { font-size: 12px; color: var(--muted); }
    .cartrow .strong { font-weight:700; color: var(--text); }
    .cartrow .rm { border:none; background:transparent; color: var(--danger); cursor:pointer; font-weight:800; }
    .cart footer { padding: 12px 16px; border-top:1px solid #1f2937; display:grid; gap:10px; }
    .row { display:flex; justify-content:space-between; color: var(--muted); font-size: 14px; }
    .grand { font-size: 18px; font-weight: 800; color: var(--text); }
    .checkout { height:44px; border-radius: 12px; border:none; background: linear-gradient(180deg, #22c55e, #16a34a); font-weight:800; cursor:pointer; }

    .pill { padding:6px 10px; border-radius: 999px; background:#0b1220; border:1px solid #1f2937; font-size:12px; color: var(--muted); }

    @media (max-width: 900px) {
      .controls { grid-template-columns: 1fr 140px 120px auto; }
      .cart { position: fixed; inset: auto 8px 8px 8px; width: auto; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>FreshVeg</h1>
          <div class="tag">Farm-fresh veggies • Same day delivery</div>
        </div>
      </div>

      <div class="controls" role="search">
        <input id="search" class="input" placeholder="Search vegetables (e.g., tomato, spinach)" />
        <select id="category" class="select" aria-label="Filter by category">
          <option value="all">All categories</option>
          <option value="leafy">Leafy</option>
          <option value="root">Root</option>
          <option value="gourd">Gourd</option>
          <option value="allium">Allium</option>
          <option value="other">Other</option>
        </select>
        <select id="sort" class="select" aria-label="Sort by">
          <option value="featured">Sort: Featured</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="name-asc">Name: A → Z</option>
        </select>
        <button class="btn" id="clearFilters">Clear</button>
      </div>
    </header>

    <main>
      <section class="grid" id="grid" aria-live="polite"></section>
    </main>
  </div>

  <!-- Cart Drawer -->
  <aside class="cart" aria-label="Shopping cart">
    <header>
      <h3>Cart</h3>
      <span class="pill" id="cartCount">0 items</span>
    </header>
    <div class="cartlist" id="cartList"></div>
    <footer>
      <div class="row"><span>Subtotal</span> <span id="subtotal">₹0</span></div>
      <div class="row"><span>Delivery</span> <span id="delivery">₹30</span></div>
      <div class="row grand"><span>Total</span> <span id="total">₹30</span></div>
      <button class="checkout" id="checkoutBtn">Buy Now</button>
      <div class="subtle">* Delivery currently limited to 5 km radius.</div>
    </footer>
  </aside>

  <script>
    // --- Data ---
    const PRODUCTS = [
      { id: 'tomato', name: 'Tomato', price: 28, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?tomato,vegetables' },
      { id: 'potato', name: 'Potato', price: 32, unit: 'per kg', cat: 'root', img: 'https://source.unsplash.com/600x400/?potato' },
      { id: 'onion', name: 'Onion', price: 40, unit: 'per kg', cat: 'allium', img: 'https://source.unsplash.com/600x400/?onion' },
      { id: 'carrot', name: 'Carrot', price: 48, unit: 'per kg', cat: 'root', img: 'https://source.unsplash.com/600x400/?carrot' },
      { id: 'cucumber', name: 'Cucumber', price: 36, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?cucumber' },
      { id: 'brinjal', name: 'Brinjal (Eggplant)', price: 55, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?eggplant' },
      { id: 'okra', name: 'Ladyfinger (Okra)', price: 52, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?okra' },
      { id: 'cabbage', name: 'Cabbage', price: 30, unit: 'per kg', cat: 'leafy', img: 'https://source.unsplash.com/600x400/?cabbage' },
      { id: 'cauliflower', name: 'Cauliflower', price: 58, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?cauliflower' },
      { id: 'spinach', name: 'Spinach (Palak)', price: 20, unit: 'per bunch', cat: 'leafy', img: 'https://source.unsplash.com/600x400/?spinach' },
      { id: 'coriander', name: 'Coriander (Dhaniya)', price: 12, unit: 'per bunch', cat: 'leafy', img: 'https://source.unsplash.com/600x400/?coriander' },
      { id: 'greenchilli', name: 'Green Chillies', price: 70, unit: 'per 250g', cat: 'other', img: 'https://source.unsplash.com/600x400/?green-chilli' },
      { id: 'capsicum', name: 'Capsicum', price: 80, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?capsicum' },
      { id: 'beetroot', name: 'Beetroot', price: 45, unit: 'per kg', cat: 'root', img: 'https://source.unsplash.com/600x400/?beetroot' },
      { id: 'pumpkin', name: 'Pumpkin', price: 34, unit: 'per kg', cat: 'gourd', img: 'https://source.unsplash.com/600x400/?pumpkin' },
      { id: 'bittergourd', name: 'Bitter Gourd (Karela)', price: 68, unit: 'per kg', cat: 'gourd', img: 'https://source.unsplash.com/600x400/?bitter-gourd' },
      { id: 'bottlegourd', name: 'Bottle Gourd (Lauki)', price: 38, unit: 'per kg', cat: 'gourd', img: 'https://source.unsplash.com/600x400/?bottle-gourd' },
      { id: 'drumstick', name: 'Drumstick (Moringa)', price: 90, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?drumstick,vegetable' },
      { id: 'radish', name: 'Radish (Mooli)', price: 42, unit: 'per kg', cat: 'root', img: 'https://source.unsplash.com/600x400/?radish' },
      { id: 'sweetcorn', name: 'Sweet Corn', price: 25, unit: 'per piece', cat: 'other', img: 'https://source.unsplash.com/600x400/?sweet-corn' },
      { id: 'garlic', name: 'Garlic', price: 160, unit: 'per kg', cat: 'allium', img: 'https://source.unsplash.com/600x400/?garlic' },
      { id: 'ginger', name: 'Ginger', price: 140, unit: 'per kg', cat: 'root', img: 'https://source.unsplash.com/600x400/?ginger' },
      { id: 'peas', name: 'Green Peas', price: 120, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?green-peas' },
      { id: 'beans', name: 'French Beans', price: 95, unit: 'per kg', cat: 'other', img: 'https://source.unsplash.com/600x400/?french-beans' },
    ];

    // --- State ---
    let cart = JSON.parse(localStorage.getItem('freshveg_cart') || '{}'); // {id: qty}

    // --- Helpers ---
    const fmt = (n) => `₹${n.toLocaleString('en-IN')}`;
    const getProduct = (id) => PRODUCTS.find(p => p.id === id);

    function computeSubtotal() {
      return Object.entries(cart).reduce((sum, [id, qty]) => sum + getProduct(id).price * qty, 0);
    }

    function saveCart() {
      localStorage.setItem('freshveg_cart', JSON.stringify(cart));
      updateCartUI();
    }

    // --- Render Products ---
    const grid = document.getElementById('grid');
    const searchEl = document.getElementById('search');
    const categoryEl = document.getElementById('category');
    const sortEl = document.getElementById('sort');

    function productCard(p) {
      const qty = cart[p.id] || 0;
      return `
        <article class="card" data-name="${p.name.toLowerCase()}" data-cat="${p.cat}" data-price="${p.price}" data-id="${p.id}">
          <div class="imgwrap"><img loading="lazy" alt="${p.name}" src="${p.img}" onerror="this.src='https://source.unsplash.com/600x400/?vegetables'" /></div>
          <div class="content">
            <div class="title">${p.name}</div>
            <div class="subtle">${p.unit}</div>
            <div class="price">${fmt(p.price)}</div>
            <div class="actions">
              <div class="qty" role="group" aria-label="Quantity selector">
                <button data-action="dec" aria-label="Decrease">−</button>
                <span>${qty}</span>
                <button data-action="inc" aria-label="Increase">+</button>
              </div>
              <button class="add" data-action="add">Add</button>
            </div>
          </div>
        </article>`;
    }

    function renderProducts() {
      grid.innerHTML = PRODUCTS.map(productCard).join('');
    }

    // --- Filtering & Sorting ---
    function applyFilters() {
      const q = searchEl.value.trim().toLowerCase();
      const cat = categoryEl.value;
      const cards = [...grid.children];
      cards.forEach(card => {
        const name = card.dataset.name;
        const c = card.dataset.cat;
        const show = (cat === 'all' || c === cat) && (q === '' || name.includes(q));
        card.style.display = show ? '' : 'none';
      });
      // sort visible
      const sort = sortEl.value;
      const visible = cards.filter(c=>c.style.display !== 'none');
      visible.sort((a,b)=>{
        if (sort === 'price-asc') return +a.dataset.price - +b.dataset.price;
        if (sort === 'price-desc') return +b.dataset.price - +a.dataset.price;
        if (sort === 'name-asc') return a.dataset.name.localeCompare(b.dataset.name);
        return 0; // featured
      });
      visible.forEach(c=>grid.appendChild(c));
    }

    // --- Cart UI ---
    const cartCount = document.getElementById('cartCount');
    const cartList = document.getElementById('cartList');
    const subtotalEl = document.getElementById('subtotal');
    const deliveryEl = document.getElementById('delivery');
    const totalEl = document.getElementById('total');

    function updateCartUI() {
      const entries = Object.entries(cart);
      cartCount.textContent = `${entries.reduce((s, [,q])=>s+q, 0)} items`;
      cartList.innerHTML = entries.length === 0 ? `<div class="subtle" style="padding:8px 4px">Your cart is empty. Add some fresh veggies! 🥕</div>` : entries.map(([id, qty]) => {
        const p = getProduct(id);
        return `
          <div class="cartrow" data-id="${id}">
            <img alt="${p.name}" src="${p.img}" onerror="this.src='https://source.unsplash.com/100x100/?vegetables'" />
            <div>
              <div class="strong">${p.name}</div>
              <div class="meta">${qty} × ${fmt(p.price)} <span class="strong">= ${fmt(qty * p.price)}</span></div>
            </div>
            <button class="rm" data-action="remove">Remove</button>
          </div>`;
      }).join('');
      const sub = computeSubtotal();
      subtotalEl.textContent = fmt(sub);
      const delivery = sub === 0 ? 0 : 30;
      deliveryEl.textContent = fmt(delivery);
      totalEl.textContent = fmt(sub + delivery);
    }

    // --- Event Handlers ---
    grid.addEventListener('click', (e) => {
      const btn = e.target.closest('button');
      if (!btn) return;
      const card = e.target.closest('.card');
      const id = card.dataset.id;
      const qtySpan = card.querySelector('.qty span');
      if (btn.dataset.action === 'inc') {
        qtySpan.textContent = (+qtySpan.textContent + 1);
      } else if (btn.dataset.action === 'dec') {
        qtySpan.textContent = Math.max(0, +qtySpan.textContent - 1);
      } else if (btn.dataset.action === 'add') {
        const q = +qtySpan.textContent || 1; // add at least 1
        cart[id] = (cart[id] || 0) + q;
        qtySpan.textContent = 0;
        saveCart();
      }
    });

    document.getElementById('cartList').addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action="remove"]');
      if (!btn) return;
      const row = e.target.closest('.cartrow');
      const id = row.dataset.id;
      delete cart[id];
      saveCart();
    });

    document.getElementById('checkoutBtn').addEventListener('click', () => {
      const sub = computeSubtotal();
      if (sub === 0) { alert('Your cart is empty! Add items before checkout.'); return; }
      const total = sub + 30;
      alert(`Order placed!\nSubtotal: ${fmt(sub)}\nDelivery: ₹30\nTotal: ${fmt(total)}\n\n(Stub) Integrate payment gateway later.`);
      cart = {}; saveCart();
    });

    document.getElementById('clearFilters').addEventListener('click', () => {
      searchEl.value = ''; categoryEl.value = 'all'; sortEl.value = 'featured'; applyFilters();
    });

    searchEl.addEventListener('input', applyFilters);
    categoryEl.addEventListener('change', applyFilters);
    sortEl.addEventListener('change', applyFilters);

    // --- Init ---
    renderProducts();
    applyFilters();
    updateCartUI();
  </script>
</body>
</html>

